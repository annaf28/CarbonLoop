// CarbonLoop Starter App (Expo + React Native Web)

import React, { useState } from 'react';
import { View, Text, TextInput, Button, ScrollView } from 'react-native';
import { NavigationContainer } from '@react-navigation/native';
import { createBottomTabNavigator } from '@react-navigation/bottom-tabs';

const Tab = createBottomTabNavigator();

const Dashboard = () => (
  <View className="flex-1 justify-center items-center p-4">
    <Text className="text-xl font-bold">CarbonLoop Dashboard</Text>
    <Text className="mt-2 text-center">Track your carbon footprint and EcoScore here.</Text>
    {/* Placeholder for dynamic EcoScore and tracker graph */}
  </View>
);

const CarbonTracker = () => {
  const [miles, setMiles] = useState('');
  const [deviceUsage, setDeviceUsage] = useState('');
  const [energy, setEnergy] = useState('');
  const [ecoXP, setEcoXP] = useState(0);

  const handleSubmit = () => {
    const xpGain = parseInt(miles || 0) * 1 + parseInt(deviceUsage || 0) * 3 + parseInt(energy || 0) * 2;
    setEcoXP(ecoXP + xpGain);
  };

  return (
    <ScrollView className="flex-1 p-4">
      <Text className="text-xl font-bold mb-4">Carbon Input</Text>
      <Text>Miles driven today:</Text>
      <TextInput value={miles} onChangeText={setMiles} keyboardType="numeric" className="border p-2 mb-2" />
      <Text>Smart device usage hours (Echo, FireTV, etc.):</Text>
      <TextInput value={deviceUsage} onChangeText={setDeviceUsage} keyboardType="numeric" className="border p-2 mb-2" />
      <Text>Home energy usage (kWh):</Text>
      <TextInput value={energy} onChangeText={setEnergy} keyboardType="numeric" className="border p-2 mb-4" />
      <Button title="Submit" onPress={handleSubmit} />
      <Text className="mt-4">Current EcoXP: {ecoXP}</Text>
    </ScrollView>
  );
};

const MissionsGame = () => (
  <ScrollView className="flex-1 p-4">
    <Text className="text-xl font-bold mb-4">Daily EcoMissions</Text>
    <Text>🎯 Mission: Unplug unused devices today — +10 EcoXP</Text>
    <Text>🔥 Mission: Use public transport — +20 EcoXP</Text>
    <Text>🔌 Mission: Set your FireTV or Echo to sleep mode — +15 EcoXP</Text>
    <Text className="mt-4 font-bold">Badges:</Text>
    <Text>🏅 Power Saver</Text>
    <Text>🚶‍♂️ Green Commuter</Text>
    <Text>📱 Smart Home Optimizer</Text>
  </ScrollView>
);

const Community = () => (
  <ScrollView className="flex-1 p-4">
    <Text className="text-xl font-bold mb-4">Community Feed</Text>
    <Text>User123: "Reduced 3kg CO₂ today!" 💚</Text>
    <Text>User456: "Completed 5 missions this week!" 🚀</Text>
  </ScrollView>
);

const Profile = () => (
  <View className="flex-1 p-4 items-center">
    <Text className="text-xl font-bold mb-4">Your Profile</Text>
    <Text>Level: 3 🌟</Text>
    <Text>Total EcoXP: 230</Text>
    <Text className="mt-4 font-bold">Earned Badges:</Text>
    <Text>🏅 Power Saver</Text>
    <Text>🚶‍♂️ Green Commuter</Text>
    <Text>📱 Smart Home Optimizer</Text>
  </View>
);

export default function App() {
  return (
    <NavigationContainer>
      <Tab.Navigator>
        <Tab.Screen name="Dashboard" component={Dashboard} />
        <Tab.Screen name="Tracker" component={CarbonTracker} />
        <Tab.Screen name="Missions" component={MissionsGame} />
        <Tab.Screen name="Community" component={Community} />
        <Tab.Screen name="Profile" component={Profile} />
      </Tab.Navigator>
    </NavigationContainer>
  );
}
